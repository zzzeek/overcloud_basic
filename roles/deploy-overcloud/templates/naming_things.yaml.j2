# see https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/10/html/advanced_overcloud_customization/sect-controlling_node_placement

parameter_defaults:
  ControllerSchedulerHints:
    'capabilities:node': 'controller-%index%'
  NovaComputeSchedulerHints:
    'capabilities:node': 'compute-%index%'

  # When we have two overclouds, we need to SSH around and we will see these
  # names in our command prompts and you are really going to want to see which
  # stack this is, e.g. "stack1-overcloud-controller-0" and not "overcloud-
  # controller-0", in those names.
  HostnameMap:
    overcloud-controller-0: "{{ rh_stack_name }}-overcloud-controller-0"
    overcloud-controller-1: "{{ rh_stack_name }}-overcloud-controller-1"
    overcloud-controller-2: "{{ rh_stack_name }}-overcloud-controller-2"
    overcloud-compute-0: "{{ rh_stack_name }}-overcloud-compute-0"
    overcloud-novacompute-0: "{{ rh_stack_name }}-overcloud-compute-0"

# TODO: this is hacky.   we can do better :)
  ControllerIPs:
    external:
{% if rh_stack_name == 'stack1' %}
      - 10.0.10.12
      - 10.0.10.24
      - 10.0.10.11
{% else %}
      - 10.1.10.12
      - 10.1.10.24
      - 10.1.10.11
{% endif %}

  # on stack1, add host entries pointing to stack2.
  # on stack2, add host entries pointing to stack1.
  ExtraHostFileEntries:
{% if rh_stack_name == 'stack1' %}
    - 10.1.10.12 stack2-overcloud-controller-0.external.localdomain stack2-overcloud-controller-0.external
    - 10.1.10.24 stack2-overcloud-controller-1.external.localdomain stack2-overcloud-controller-1.external
    - 10.1.10.11 stack2-overcloud-controller-2.external.localdomain stack2-overcloud-controller-2.external
{% else %}
    - 10.0.10.12 stack1-overcloud-controller-0.external.localdomain stack1-overcloud-controller-0.external
    - 10.0.10.24 stack1-overcloud-controller-1.external.localdomain stack1-overcloud-controller-1.external
    - 10.0.10.11 stack1-overcloud-controller-2.external.localdomain stack1-overcloud-controller-2.external
{% endif %}
