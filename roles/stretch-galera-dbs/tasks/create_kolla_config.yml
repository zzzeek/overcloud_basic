# these next two maps we can do the easy way because we don't care about trailing semicolon
- name: create stack1 remote_node_map from stack2 nodes
  set_fact:
    remote_node_map: "{{ remote_node_map | default('') }}{{ hostvars[item]['pacemaker_node_name'] }}:root@{{ hostvars[item]['transport_ip_number'] }};"
  with_items: "{{ groups['galera_nodes'] | intersect(groups['stack2']) }}"
  when: "'stack1' in group_names"

- name: create stack2 remote_node_map from stack1 nodes
  set_fact:
    remote_node_map: "{{ remote_node_map | default('') }}{{ hostvars[item]['pacemaker_node_name'] }}:root@{{ hostvars[item]['transport_ip_number'] }};"
  with_items: "{{ groups['galera_nodes'] | intersect(groups['stack1']) }}"
  when: "'stack2' in group_names"

- name: set master overcloud weight
  set_fact:
    pc_weight: "2"
  when: "'stack1' in group_names"

- name: set follower overcloud weight
  set_fact:
    pc_weight: "1"
  when: "'stack2' in group_names"

